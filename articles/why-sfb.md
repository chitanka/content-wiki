Title: Защо SFB?

Нека предположим, че искате да организирате библиотека, но не каква 
да е, а такава, позиционирана в Интернет. Искате да бъде достъпна за 
всички, така че се налага да осигурите поддържането на различни 
електронни формати на файловете с книги, с които работят четящите 
устройства. Освен това искате потребителите да имат възможност да 
подготвят текстове сами и да ги изпращат за качване. Въпросът е — в 
какъв формат да бъдат съхранявани тези текстове? Основният проблем, 
освен различното ниво на компютърна грамотност на бъдещите потребители 
на вашата библиотека и това доколко са запознати с различните 
текстообработващи програми, е, че почти всички формати за представяне на
електронен текст са ориентирани към визуалното представяне на текста 
(наклонен, центриран и т.н.), а не към неговата същност — основен текст,
заглавие на глава, епиграф и т.н. Нима това е толкова важно?

Представете си, че сте страньор в издателство. Възлагат ви 
оформянето на книга от три свързани повести в определен формат, да кажем
60×90/16 (стандартен размер за книжно издание). Вземате папката с 
авторския „ръкопис“ (напечатан на пишеща машина), сядате пред компютъра 
си и отваряте текстовия файл, набран от 63-годишната леля Сийка, чиито 
компютърни умения се изчерпват с поливането на зеленчуците във фермата й
във Фейсбук, но която може да набира текст със скорост 160 символа в 
минута. И започвате.

Така-а… заглавна страница… готово… още една заглавна с „Книга 
първа“… готово. Какъв е следващият ред? „Глава първа“. Ясно, заглавие 
— ще направим буквите по-едри, ще удебелим и центрираме текста. Какъв е 
следващият фрагмент? Аха, епиграф — ще наклоним текста и ще го изместим 
силно вдясно. После — основен текст; ще му сложим нормален размер, ще го
подравним двустранно и началото на всеки абзац ще започва малко 
по-навътре, за да се отличава. Хмм, тук е подчертал някаква дума, явно 
иска да наблегне на нея, затова ще я направим с наклонени букви… и така 
нататък, и така нататък, чак до края на третата повест. Накрая записвате
резултата и го предавате на русокосата „асистентка“ на управителя на 
фирмата, чието единствено задължение е поддържането на доброто му 
физическо и психическо състояние.

След месец и половина шефовете на издателството с изумление 
научават, че астрономическият тираж от 200 екземпляра вече е изчерпан, а
разпространителите непрекъснато изпращат запитвания за допълнителни 
бройки. Решават да заложат на изпитаната стара рецепта и да пуснат 
допечатка (освободена от данъци поради липса на документни доказателства
за съществуването й). За нещастие обаче текущите представителни разходи
на управителя (фитнес, маникюр, масаж и прочее грижи за външния вид на 
асистентката му) са блокирали плащането на печатницата за първия тираж, а
те (какви гадове!) отказват да стартират нова поръчка без да са 
получили парите за предходната. Но… печатници много и всички „плачат“ за
поръчки. За нула време намират подходяща, но се оказва, че тяхната 
машина работи с друг размер листи. И тъй като шефовете не искат да губят
ценно място (цели 16 кв.дм!), като пуснат допечатката със същия размер,
както първата партида, решават да ударят с един куршум два заека — ще 
издадат всяка от трите повести в отделна книжка с по-малък формат. 
По-този начин не само ще оползотворят мястото, а и ще спечелят два пъти 
повече, понеже ще разхвърлят надутата цена по трите отделни части.

И ето че творбата е отново пред вас. Какво да се прави — нали за 
това ви плащат — сядате отново пред компютъра, разделяте стария файл на 
три нови, задавате новите размери на страницата и започвате отначало. 
„Глава първа“ — ще намалим размера на шрифта от 22 на 18 pt. Епиграфът е
твърде навътре; ще намалим полето от седем на три сантиметра. Отстъпът 
на параграфите в основния текст също е твърде голям, затова ще го 
намалим на 1 см, ще намалим и размера на самия текст, да речем на 10 pt…
и т.н., и т.н. В края на деня се прибирате уморен, но доволен от 
свършената работа и сядате пред домашния компютър, за да разпределите 
щедрата си заплата от 450 лв. по всички разходни пера в семейния бюджет.

На следващия ден обаче с изумление научавате, че печатницата е 
върнала файловете. „Модерната“ им издателска система (от 1991 г.) не 
разполага с пълния набор шрифтове, в резултат на което преобразува 
всички символи, заложени с курсив, в неразбираеми йероглифи. За щастие 
удебеленият текст не представлява проблем, затова сядате, запретвате 
ръкави и се заемате с едно пълно преобразуване на всички символи в 
наклонен шрифт, в нещо друго — нормален на епиграфите, но с различен 
размер, за да се отличава от основния; удебеляване акцентираните 
фрагменти в основния текст; оформяне отново стиховете и т.н., и т.н.
Приключвате с новото оформление на книгите сериозно раздразнени. Няма ли
някакъв по-лесен начин да се свърши цялата тази работа?! Все пак за 
какво са всички тези компютри, като вместо да решават проблеми, те само 
създават нови.

В действителност нещата могат да бъдат опростени. Повечето от 
съвременните текстообработващи програми (Word, Open Office и др.) 
поддържат т.нар. „стилове“ — набори от параметри (шрифт, размер, отстъп и
т.н.), които могат да се приложат както към цели параграфи (като 
например епиграф), така и към участъци от текста (напр. акцентиран 
текст). Но да се върнем на темата.
Направи ли ви впечатление в какво точно се състои работата на нашия 
хипотетичен страньор? При всеки отделен случай той определя типа на 
текста — дали е заглавие, епиграф, стих и т.н., и в зависимост от това 
прилага определен набор характеристики (размер, наклон и плътност на 
шрифта, подравняване на текста и т.н.). И ако се наложи съобразяване с 
друг набор стилове („нямаме наклонен шрифт; махни го!“) той (страньорът)
определя отново типа на всеки фрагмент от текста, след което прилага 
новия набор характеристики.

Именно определянето на типа на текста е единственият етап от 
подготовката на една електронна книга, който не може да бъде 
автоматизиран, а трябва да се извърши от човек.

Но да се върнем обратно към нашата електронна библиотека, скътана нейде в
безбрежното интернет пространство. Вероятно вече си задавате въпроса, 
след като библиотеката е електронна, защо си губим времето с проблемите 
на печатните издания?
Ами защото при подготовката на електронни текстове се налага да се 
справяме с абсолютно същите проблеми. Ако искате да форматирате за 
уеб-страница следния текст — «Глава първа», ще трябва да напишете &lt;h2&gt;Глава първа&lt;/h2&gt;“, 
ако решите да бъде някое уики се налага да смените командата на „==Глава първа==“ и т.н. при всеки 
различен формат. Освен това, масовите формати са твърде „тежки“ за 
автоматичен анализ, а редакторите, които използват, добавят купища 
излишна информация.

За щастие, съществува и един формат, ориентиран именно към 
представяне структурата на текста (т.е. типа на отделните елементи), а 
не към начина, по който ще изглежда на екрана на електронния четец.

FictionBook е създаден преди повече от десет години за целите на 
руска онлайн-библиотека. Форматът се оказва изключително подходящ и 
удобен за тази дейност и бързо набира популярност. В него се описва не 
как изглежда даден фрагмент (наклонен, центриран…), а какво представлява
самият фрагмент (заглавие, епиграф…). След актуализиране и изчистване 
на повечето «недомислици» е реализирана втора версия — FictionBook2 
(FB2), която се използва и до ден-днешен. Въпреки че FB2 е замислен само
като средство за съхранение и изходен материал за ковертиране, 
простотата му довежда до появяването на четци за всякакъв вид 
устройства. Към момента повечето устройства за четене на електронни 
книги поддържат FB2 формат за електронни книги.

Е, значи намерихме идеалния формат за съхраняване на текстове… 
всъщност — не съвсем. Като изключим факта, че FB2 не е идеален (при него
съществуват някои глупави ограничения, с които трябва да се 
съобразяваме), остава да намерим начин за лесното му пресъздаване от 
самите потребители. Има само два що-годе прилични редактора за FB2, но 
те работят само под Windows; и двата имат проблеми, които ги правят 
трудни за използване от масовия потребител. А и едва ли никой ще се 
заеме да изписва на ръка маркерите за FB2 (&lt;p&gt;...&lt;/p&gt; около 
всеки параграф; &lt;title&gt;…&lt;/title&gt; около всяко заглавие; да не
говорим пък за метаданните — издателство, година, преводач и т.н.) и не
на последно място — форматиран по този начин текст се преглежда много, 
много трудно.

Добре де, а дали не бихме могли да дадем на потребителите 
възможност да въвеждат форматиран текст, като не ги ограничаваме със 
сложни маркери, които буквално „скриват“ същинския текст? Този въпрос 
вече е възниквал и има много прилично решение, което повечето от 
интернет потребителите вече познават в известна степен — та нали всеки е
писал по форуми и е наясно с разните му там маркери като [b]-[/b] и 
прочее.

Да, всъщност бихме могли. Вместо да караме потребителя да огражда
всеки параграф с &lt;p&gt;…&lt;/p&gt;, можем да поискаме от него просто
да поставя по един табулатор в началото на всеки параграф. По този 
начин получаваме еднозначен маркер, указващ къде започва текста, което 
ни е необходимо за автоматичното конвертиране в различните електронни 
формати и едновременно с това имитираме визуално отстъпа в началото на 
всеки параграф. Ами заглавията? Нека вместо да огражда всяко заглавие с 
&lt;title&gt;…&lt;/title&gt;, просто да сложи една вертикална черта пред
табулатора („|  Глава първа“)… и така нататък, и така нататък.

Точно по този начин и с тази цел е създаден форматът SFB. В него е
заложено опростяването на служебната информация около същинския текст.

Т.е. представено по друг начин - SFB ни представя произведението 
като в тетрадка с поле отляво... И в това поле (което е реализирано с 
табулатори) се записват специалните символи за оформление на 
произведението.

_Нужно ви е по-просто обяснение?_

Ами добре…

Да предположим, че в книжното издание част от текста, който 
коригирате и форматирате в момента, е изведен с наклонен шрифт (в 
курсив). **Видът на маркера, който ще използвате зависи изцяло от типа 
на въпросния текст, а не от това, че в книжното издание текста е бил 
наклонен!**

Може би това е дума, върху която авторът е искал да наблегне? В 
този случай използвате маркер за акцентиран текст (ограждане с долни 
черти).

А може би въпросният текст представлява цитат, който 
издателството е искало да обособи по някакъв начин — тогава просто ще 
поставите маркерите, с които се означава цитат и няма да се притеснявате
за това как ще бъде изведен в последствие.

Може би това е начало на глава, което нашият приятел страньорът е
решил да отдели, за да подчертае прехода към следващия раздел (като 
например изписване на първия ред с главни букви, или изрисувана с 
различен шрифт и големина първа буква, обхващаща 2-3 реда)? Това е 
издателско форматиране, което _не трябва_ да бъде отразено вашия файл по никакъв начин.

Или пък стихове? Всички издатели предпочитат да ги форматират с 
наклонен текст. Но вие в този случай поставяте маркерите за 
стихотворение и забравяте за него.

В тази статия, разбира се, далеч не е описан цялостния начин за 
форматиране в SFB. Дадените примери са просто за илюстрация. Подробното 
описание на това как се форматира в SFB е обект на друго изложение.

Завършвайки изложеното досега, можем да обобщим следното:

1.  Форматът SFB може да се използва с всеки текстов редактор, маркерите не «досаждат» при корекция, а правилата осигуряват еднозначно конвертиране към желаните изходни формати (ePub, mobi и т.н.).
2.  **Няма и не може да има конвертор**, който да преобразува коригираните текстове в SFB-формат — това е дейност, която **задължително** се извършва ръчно от човек, тъй като поставянето на маркерите за SFB цели да укаже **типа** на специализирания (т.е. — различен от основния) текст, **без да се правят каквито и да е предположения за начина, по който той ще бъде изведен в последствие.** А определянето на тип е невъзможно да бъде извършено от програма — това е творческа дейност, присъща единствено на човешкия ум.

_Март, 2013 г._
